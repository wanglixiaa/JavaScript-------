<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <title>Document</title>
    <style>
      span{color:red;}
    </style>
</head>
<body>
<h1>变量、作用域和内存问题</h1>
<h3>基本类型和引用类型的值</h3>
<p>当复制保存着对象的某个变量时，操作的市对象的引用。但在为对象添加属性时，操作的实际上是对象</p>
<p>只能给引用类型的值动态地添加属性，不能动态地给基本类型的值添加属性</p>
<h3>传递参数</h3>
<p>函数的参数都是按值传递的</p>
<span>p71重点看一下，若参数传进来的是个对象 是如何赋值的</span>
<h3>检测类型</h3>
<p>基本数据类型检测方法：typeof</p>
<p>引用类型数据检测方法：instanceof(alert(person instanceof Object/Array/)person是Object的势利吗)</p>
<h3>执行环境及作用域</h3>
<p>执行环境简称环境，定义了变量或函数有权访问的其他数据（举例：全局环境中有一个变量color和一个函数changeColor())</p>
<p>全局执行环境被认为是window对象,所有的全局变量和函数都是作为window对象的属性和方法创建的,某个执行环境中的代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数的定义也被销毁</p>
<p>当代码在一个环境中执行时，会创建变量对象的一个作用域链，作用域链的用途：保证对执行环境有权访问的所有变量和函数的有序访问</p>
<h3>延长作用域链</h3>
<p>try-catch语句的catch块</p>
<p>with语句(将指定的对象添加到作用域链中)</p>
<p>以下是一个try-catch语句结合throw的例子，try 语句测试代码块的错误。

    catch 语句处理错误。
    
    throw 语句创建自定义错误。</p>
    <p>
        &ltp&gt请输出一个 5 到 10 之间的数字:&lt/p&gt"

        &ltinput id="demo" type="text"&gt
        &ltbutton type="button" onclick="myFunction()"&gt测试输入&lt/button&gt
        &ltp id="message">&lt/p&gt
    </p>
<p>
    <p>请输出一个 5 到 10 之间的数字:</p>

    <input id="demo" type="text">
    <button type="button" onclick="myFunction()">测试输入</button>
    <p id="message"></p>
    
</p>
  <p><span>***看下p74的作用域链图4-3（全局环境里有变量color和函数changeColor()。changeColor()的局部环境中有一个变量anotherColor和一个名为swapColor()的函数，但他也可以访问全局中烦人变量color</span></p>
  <h3>没有块级作用域</h3>
  <p>导致定义在花括号封闭的代码块中的变量可以在全局环境中使用</p>
  <p>访问局部变量要比访问全局变量快</p>
  <h3>垃圾收集</h3>
  <p>方法1:标记清除（垃圾收集qi）</p>
  <p>方法2:引用计数</p>
<script>
  function myFunction() {
    var message, x;
    message = document.getElementById("message");
    message.innerHTML = " ";
    x = document.getElementById("demo").value;
    try { 
        if(x == "")  throw "值为空";
        if(isNaN(x)) throw "不是数字";
        x = Number(x);
        if(x < 5)    throw "太小";
        if(x > 10)   throw "太大";
    }
    catch(err) {
        message.innerHTML = "错误: " + err;
    }
}
</script>
</body>
</html>